<script type="text/javascript">
$(document).ready(function() {
    
  $('.startup_name').live('keyup', function(){
    var username = $(this).val().replace(/\s/g, '');  
    $('.startup_username').val(username);  
    $('.visible_startup_username').val('http://www.ami.com/' + username);    
  });
      
  $('.startup_name').trigger('keyup');  
});
</script>

<%= form_for(@startup, :html => { :multipart => true }) do |f| %>
  <% if @startup.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@startup.errors.count, "error") %> prohibited this startup from being saved:</h2>

      <ul>
      <% @startup.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :user_id %><br />
    <%= f.select :user_id, @users.collect{|us| [ us.email, us.id ] } %>
  </div>
  <div class="field">
    <%= f.label :startup_name %><br />
    <%= f.text_field :startup_name, :class => 'startup_name'  %>
  </div>
  <div class="field">
    <%= f.label 'AMI Startup Url' %><br />
    <%= f.text_field :username, :value => 'http://www.ami.com/', :disabled => 'disable', :class => 'visible_startup_username' %>
    <%= f.hidden_field :username, :class => 'startup_username'%>
  </div>
  <div class="field">
    <%= f.label 'Startup Contact Email' %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :address %><br />
    <%= f.text_field :address %>
  </div>
  <div class="field">
    <%= f.label :city %><br />
    <%= f.text_field :city %>
  </div>
  <div class="field">
    <%= f.label :state %><br />
    <%= f.text_field :state %>
  </div>
  <div class="field">
    <%= f.label :zip %><br />
    <%= f.text_field :zip %>
  </div>
  <div class="field">
    <%= f.label :brief_description %><br />
    <%= f.text_field :brief_description %>
  </div>
  <div class="field">
    <%= f.label 'Logo' %><br />
    <%= f.file_field :startup_logo %>
  </div>

  <%= f.fields_for :descriptions do |builder| %>
    <%= render "descriptions/description_fields", :f => builder %>
  <% end %>
  <p><%= link_to_add_fields "Add Description", f, :descriptions %></p>


  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
